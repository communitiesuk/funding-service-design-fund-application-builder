{% extends "base.html" %}
{% from "govuk_frontend_jinja/components/button/macro.html" import govukButton %}
{% from "govuk_frontend_jinja/components/select/macro.html" import govukSelect %}
{% from "govuk_frontend_jinja/components/back-link/macro.html" import govukBackLink %}
{% from "govuk_frontend_jinja/components/error-summary/macro.html" import govukErrorSummary %}

{% block content %}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        {{ govukBackLink({
      "text": "Back",
      "href": back_link
    }) }}
    {% if form.errors %}
      {{ govukErrorSummary(wtforms_errors(form)) }}
    {% endif %}

    <h1 class="govuk-heading-l">Select a grant</h1>
    <p class="govuk-body">Select or add a new grant for this application</p>

    <form method="POST">
      {{ form.csrf_token }}
      {{ govukSelect({
        "id": form.fund_id.id,
        "name": form.fund_id.name,
        "items": select_items,
        "label": "",
        "errorMessage": {"text": form.fund_id.errors[0]} if form.fund_id.errors else None,
        "classes": "govuk-!-width-one-half",
        "formGroup": {
          "classes": "govuk-!-margin-bottom-3"
        }
      }) }}

      <p class="govuk-body govuk-!-margin-top-1 govuk-!-margin-bottom-7">
        <a href="{{ url_for('fund_bp.create_fund') }}" class="govuk-link">Add a new grant</a>
      </p>

      <div class="govuk-button-group">
        {{ govukButton({
          "text": "Continue",
          "type": "submit"
        }) }}
        {{ govukButton({
          "text": "Cancel",
          "href": back_link,
          "classes": "govuk-button--secondary"
        }) }}
      </div>
    </form>
  </div>
</div>
{% endblock content %}
